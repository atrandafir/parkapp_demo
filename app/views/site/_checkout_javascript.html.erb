<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
<script>

/*
  if (navigator.geolocation) {
  var timeoutVal = 10 * 1000 * 1000;
  navigator.geolocation.getCurrentPosition(
    displayPosition, 
    displayError,
    { enableHighAccuracy: true, timeout: timeoutVal, maximumAge: 0 }
  );
}
else {
  alert("Geolocation is not supported by this browser");
}

function displayPosition(position) {
  alert("Latitude: " + position.coords.latitude + ", Longitude: " + position.coords.longitude);
}

function displayError(error) {
  var errors = { 
    1: 'Permission denied',
    2: 'Position unavailable',
    3: 'Request timeout'
  };
  alert("Error: " + errors[error.code]);
}
*/

  var map;
  function initialize() {
    var mapOptions = {
      zoom: 15,
      center: new google.maps.LatLng(41.3952305, 2.1935201000000006),
      disableDefaultUI: true,
      zoomControl: true,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(document.getElementById('checkout-map-canvas'),
    mapOptions);
    
    var marker = new google.maps.Marker({
    position: new google.maps.LatLng(41.3952305, 2.1935201000000006),
    map: map,
    draggable: true
  });
  
  google.maps.event.addListener(marker, 'dragend', function() {
    var new_position=marker.getPosition();
    document.getElementById('parking_lot_latitude').value=new_position.lat();
    document.getElementById('parking_lot_longitude').value=new_position.lng();
  });
    
  }

  google.maps.event.addDomListener(window, 'load', initialize);
  
  

</script>